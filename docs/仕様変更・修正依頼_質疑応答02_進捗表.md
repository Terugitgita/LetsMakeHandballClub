# 仕様変更・修正依頼 質疑応答02 進捗管理表

---

## 概要

| 項目 | 内容 |
|------|------|
| プロジェクト | パワプロ風ポジション別能力表示システム |
| 開始日 | 2026-01-03 |
| 対象 | GK以外の6ポジション（4カテゴリ管理） |

---

## 決定事項

| 質問 | 回答 |
|------|------|
| Q1: 対象ポジション | B) GK以外の6ポジションに仕様書の4種類を適用 |
| Q2: 変化条件 | A) 練習回数ベース |
| Q3: 練習と弱点の対応 | A) 練習メニューで全ポジションに影響 |
| Q4: UI表示場所 | A) 平日画面に「選手能力」ボタン追加、モーダル表示 |
| Q5: 全弱点克服タイミング | A) 決勝戦開始時点で全弱点克服可能 |
| Q6: 変化ペース | A) 2-3練習で1つ変化（自然なペース） |
| Q7: 言い換え表の使い方 | A) + C) 言い換えメッセージ + シンプル通知 |
| Q8: LW/RW, LB/RB共有 | A) 種別で共有（4カテゴリ管理） |
| Q9: 練習と弱点の対応詳細 | A) 提案通り（パス→判断系、ドリブル→動作系、シュート→シュート系、総合→全カテゴリ） |

---

## 仕様詳細

### ポジションカテゴリと弱点/強み

| カテゴリ | ポジション | 弱点（赤特） | 強み（青特） |
|---------|-----------|-------------|-------------|
| ウイング | LW, RW | 体勢不安定、守備1on1不足、決定率の波 | 速攻○、狭角からの得点力 |
| バック | LB, RB | 精度ムラ、リリース遅れ、戻り遅い | ミドルから守備を下げられる |
| センターバック | CB | 判断遅れ、消極性、中央管理不足 | 味方を活かし流れを支配 |
| ピヴォット | PV | 可動域狭い、片側依存 | 守備を引き付ける存在 |

**合計:** 11個の弱点、5個の強み

### 練習と弱点の対応

| 練習 | 影響する弱点カテゴリ |
|------|---------------------|
| パス練習 | 判断系（判断遅れ、消極性、中央管理不足） |
| ドリブル練習 | 動作系（体勢不安定、可動域狭い、片側依存） |
| シュート練習 | シュート系（決定率の波、精度ムラ、リリース遅れ） |
| 総合練習 | 全カテゴリ均等（守備1on1不足、戻り遅い含む） |

### 変化ペース計算

- 練習可能回数: 約6週 × 5日 = 30回
- 弱点克服 + 強み獲得: 11 + 5 = 16個
- ペース: 30 ÷ 16 ≈ 2練習で1つ変化

---

## 実装タスク

### Phase 1: データ構造・基盤

| No | タスク | ファイル | ステータス |
|----|--------|----------|-----------|
| 1-1 | 弱点/強みデータ定義 | `js/config.js` | [x] 完了 |
| 1-2 | gameStateに能力状態追加 | `js/gameState.js` | [x] 完了 |
| 1-3 | 練習時の弱点克服ロジック | `js/gameState.js` | [x] 完了 |

### Phase 2: UI実装

| No | タスク | ファイル | ステータス |
|----|--------|----------|-----------|
| 2-1 | 平日画面に「選手能力」ボタン追加 | `js/screens.js` | [x] 完了 |
| 2-2 | ステータスカードモーダル作成 | `js/screens.js` | [x] 完了 |
| 2-3 | パワプロ風カードCSS（インラインスタイル） | `js/screens.js` | [x] 完了 |

### Phase 3: 通知・演出

| No | タスク | ファイル | ステータス |
|----|--------|----------|-----------|
| 3-1 | 弱点克服時の通知表示 | `js/screens.js` | [x] 完了 |
| 3-2 | 言い換えメッセージ表示 | `js/screens.js` | [x] 完了 |
| 3-3 | 強み獲得時の演出 | `js/screens.js` | [x] 完了 |

### Phase 4: バランス調整

| No | タスク | ファイル | ステータス |
|----|--------|----------|-----------|
| 4-1 | 変化ペース調整（決勝前に全克服可能か確認） | `js/gameState.js` | [x] 完了（2練習で1変化） |
| 4-2 | テスト・動作確認 | - | [ ] ユーザー確認待ち |

---

## 実装詳細

### 追加されたファイル変更

1. **js/config.js**
   - `POSITION_ABILITIES` 定数追加（4カテゴリ、11弱点、5強み、練習マッピング）

2. **js/gameState.js**
   - `gameState.abilities` 状態追加
   - `processAbilityProgress()` - 練習後の能力進捗処理
   - `getAbilityStatus()` - 能力状態サマリ取得
   - `getAbilitiesByCategory()` - カテゴリ別能力取得
   - `getAllWeaknesses()`, `getAllStrengths()` 等のヘルパー関数

3. **js/training.js**
   - `executeTraining()` 戻り値に `abilityChange` 追加

4. **js/screens.js**
   - 平日画面に「📊 選手能力」ボタン追加
   - `showPlayerAbilitiesModal()` - 能力表示モーダル
   - `showAbilityChangeNotification()` - 弱点克服/強み獲得通知

---

**最終更新:** 2026-01-03
