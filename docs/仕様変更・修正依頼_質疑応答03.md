# 仕様変更・修正依頼 質疑応答03

---

## P70: 「作者に一言」機能

### 背景
ゲーム画面右上に常時表示される「作者に一言」ボタンを実装する。バグ報告と作者へのフィードバック機能を提供。

### 要件サマリ

| No | 機能 | 内容 |
|----|------|------|
| 1 | バグ報告 | 「今！」ボタンで直近5ステップを自動記載、編集して投稿 |
| 2 | フィードバック投稿 | 搭載機能要望、仕様修正要望、新ゲーム要望、自由投稿 |
| 3 | 共有機能 | ゲーマー同士で投稿を共有 |
| 4 | 作者返信 | 作者が投稿に返信可能 |
| 5 | モデレーション | 作者が「表示」「非表示」「削除」を選択するまで非公開 |

---

## Claudeからの質問

### Q1. バックエンド/データベース

**質問:** ユーザー投稿を保存・共有するにはサーバーが必要です。どのバックエンドを使用しますか？

**案A) Firebase (Firestore + Authentication):**
```
利点: 無料枠あり、リアルタイム同期、認証機能内蔵
欠点: Google依存、従量課金（大規模時）
```

**案B) Supabase (PostgreSQL + Auth):**
```
利点: オープンソース、SQLベース、無料枠あり
欠点: Firebaseより若干複雑
```

**案C) 自前サーバー (Node.js + MongoDB/MySQL):**
```
利点: 完全な制御、カスタマイズ自由
欠点: サーバー管理・ホスティング費用が必要
```

**案D) Google Forms + Spreadsheet連携:**
```
利点: 無料、簡単実装
欠点: リアルタイム共有困難、返信機能が限定的
```

- [ ] A) Firebase
- [ ] B) Supabase
- [ ] C) 自前サーバー
- [x] D) Google Forms連携
- [x] E) その他（下記に記載）

→ ユーザー回答:GitHubの中にファイルを作成できない？

---

### Q2. ユーザー識別方法

**質問:** 投稿者の識別方法は？

**案A) 匿名（デバイスID）:**
```
ログイン不要、デバイスごとに自動ID付与
同じデバイスからの投稿は紐付け可能
```

**案B) ニックネーム入力:**
```
投稿時にニックネーム入力（任意）
識別用の一時的なID自動生成
```

**案C) アカウント登録:**
```
メール/パスワードでアカウント作成
Google/Twitterログインも可能
```

**案D) 完全匿名:**
```
識別情報なし、全員「匿名」表示
```

- [ ] A) 匿名（デバイスID）
- [x] B) ニックネーム入力
- [ ] C) アカウント登録
- [ ] D) 完全匿名
- [ ] E) その他（下記に記載）

→ ユーザー回答:

---

### Q3. 「今！」ボタンの5ステップ詳細

**質問:** 「5ステップ遡って詳細を記載」とは、具体的にどのような情報を記録しますか？

**案A) 画面遷移履歴:**
```
1. 平日画面 (Week 3, Day 4)
2. パス練習選択
3. 練習完了画面
4. 試合準備画面
5. 試合中（現在位置）
```

**案B) アクション履歴 + 状態:**
```
1. [Week 3 Day 4] パス練習実行 → Pass: 15.2 → 16.4
2. [Week 3 Day 5] 総合練習実行 → 弱点「判断遅れ」克服
3. [Week 3 Day 6] 試合開始 vs 東京代表
4. [Week 3 Day 6] 作戦: パス→ドリブル→シュート
5. [Week 3 Day 6] 得点: 3-2（現在）
```

**案C) スクリーンショット + テキスト:**
```
画面キャプチャ + 上記テキスト情報を自動添付
```

- [ ] A) 画面遷移履歴のみ
- [x] B) アクション履歴 + 状態（詳細）
- [ ] C) スクリーンショット + テキスト
- [ ] D) その他（下記に記載）

→ ユーザー回答:試合中であれば、試合の状況を詳細に。

---

### Q4. 投稿カテゴリと表示形式

**質問:** 投稿カテゴリの選択方法とユーザーへの表示形式は？

**投稿時:**
```
[バグ報告] [機能要望] [仕様修正] [新ゲーム案] [自由投稿]
```

**表示形式案A) 掲示板スタイル:**
```
━━━━━━━━━━━━━━━━━━━━
[機能要望] ユーザーA - 2026/01/05
試合中にタイムアウト機能が欲しい
→ 作者返信: 検討します！次回アップデートで対応予定
━━━━━━━━━━━━━━━━━━━━
```

**表示形式案B) カード形式:**
```
┌──────────────────┐
│ 🎮 機能要望      │
│ タイムアウト機能  │
│ 👤 ユーザーA     │
│ 💬 作者返信あり  │
└──────────────────┘
```

**表示形式案C) タブ切り替え:**
```
[全て] [バグ] [要望] [その他]
各タブで絞り込み表示
```

- [ ] A) 掲示板スタイル
- [x] B) カード形式
- [ ] C) タブ切り替え
- [ ] D) A + C（掲示板 + タブ絞り込み）
- [ ] E) その他（下記に記載）

→ ユーザー回答:

---

### Q5. 作者管理画面

**質問:** 作者（あなた）が投稿を管理する画面はどこに用意しますか？

**案A) ゲーム内管理画面:**
```
特定のパスワード/コマンドで管理画面にアクセス
```

**案B) 別途Webダッシュボード:**
```
管理専用のWebページを用意
https://your-game.com/admin
```

**案C) Firebase/Supabase コンソール直接:**
```
バックエンドの管理画面で直接データ操作
```

- [ ] A) ゲーム内管理画面
- [x] B) 別途Webダッシュボード
- [ ] C) バックエンドコンソール直接
- [ ] D) その他（下記に記載）

→ ユーザー回答:本プロジェクト内に開発者だけがアクセス出来るGUI/DBを作って。そのGUI/DBには私のローカル環境からバッチファイルを起動する以外に無い様にして。

---

### Q6. 投稿の公開フロー

**質問:** 投稿が他ユーザーに見えるまでのフローを確認させてください。

```
[ユーザー投稿]
    ↓
[非公開状態でサーバーに保存]
    ↓
[作者が確認]
    ↓
┌────────────────────┐
│ 「表示」選択       │ → 全ユーザーに公開
│ 「非表示」選択     │ → 引き続き非公開（作者のみ閲覧可）
│ 「削除」選択       │ → 完全削除
└────────────────────┘
```

- [ ] A) 上記フローでOK
- [x] B) 投稿者本人には即時表示、他ユーザーには承認後
- [ ] C) バグ報告は即時公開、その他は承認制
- [ ] D) その他（下記に記載）

→ ユーザー回答:

---

### Q7. ボタンの表示位置とデザイン

**質問:** 「作者に一言」ボタンの具体的な位置とデザインは？

**案A) 右上固定（小さめ）:**
```
┌─────────────────────────────┐
│                    [💬作者] │  ← 小さいボタン
│                             │
│      ゲーム画面             │
│                             │
└─────────────────────────────┘
```

**案B) フローティングボタン（右下）:**
```
┌─────────────────────────────┐
│                             │
│      ゲーム画面             │
│                             │
│                       [💬]  │  ← 丸いフローティングボタン
└─────────────────────────────┘
```

**案C) メニュー内:**
```
ハンバーガーメニュー内に「作者に一言」項目を追加
```

- [x] A) 右上固定（小さめ）
- [ ] B) フローティングボタン（右下）
- [ ] C) メニュー内
- [ ] D) その他（下記に記載）

→ ユーザー回答:

---

### Q8. オフライン対応

**質問:** オフライン時の動作は？

- [x] A) オフライン時は機能無効（ボタン非表示 or グレーアウト）
- [ ] B) オフライン時も投稿可能（ローカル保存→オンライン時に送信）
- [ ] C) バグ報告のみローカル保存可能
- [ ] D) その他（下記に記載）

→ ユーザー回答:

---

## 追加確認事項

### 実装の優先順位

**質問:** 全機能を一度に実装するのは大規模になります。優先順位を教えてください。

| 優先度 | 機能 |
|--------|------|
| 高 | ? |
| 中 | ? |
| 低 | ? |

**案:**
```
高: バグ報告（今！ボタン）+ 基本投稿
中: 作者返信 + モデレーション
低: ユーザー間共有 + リアルタイム更新
```

- [ ] A) 上記優先順位でOK
- [x] B) 全機能同時実装
- [ ] C) 別の優先順位（下記に記載）

→ ユーザー回答:

---

---

## 追加質問（Claudeより）

### Q9. GitHubをデータストレージとして使う場合の方式

**質問:** GitHubにファイルを作成する方法として、いくつかの選択肢があります。

**案A) GitHub Issues を使用:**
```
利点:
- ユーザーがGitHubアカウント不要（APIで投稿可能）
- Issue = 1投稿として管理しやすい
- ラベルでカテゴリ分け可能
- コメント機能で返信可能

欠点:
- GitHub Personal Access Token が必要（環境変数で管理）
- リポジトリが公開されている必要あり
```

**案B) JSONファイルをリポジトリに保存:**
```
利点:
- データ構造を自由に設計可能
- オフラインでも閲覧可能（GitHub Pages経由）

欠点:
- 書き込みにはGitHub Token必要
- ユーザーからの直接書き込みは不可（セキュリティ上）
- 中間サーバーか GitHub Actions が必要
```

**案C) Google Forms → GitHub Actions 連携:**
```
[ユーザー] → [Google Form] → [Spreadsheet] → [GitHub Actions] → [JSON in Repo]

利点:
- ユーザーは簡単に投稿（Form入力のみ）
- 無料で実現可能
- セキュリティリスク低

欠点:
- リアルタイム性がない（定期同期）
- Google Form のUI制約
```

**案D) GitHub Gist を使用:**
```
利点:
- シンプルなAPI
- 公開/非公開の切り替え可能

欠点:
- 複数ファイル管理が煩雑
- 検索性が低い
```

- [ ] A) GitHub Issues
- [ ] B) JSONファイル（中間サーバー必要）
- [ ] C) Google Forms → GitHub Actions 連携
- [x] D) GitHub Gist
- [ ] E) その他（下記に記載）

→ ユーザー回答:

---

### Q10. 管理画面のアーキテクチャ

**質問:** 「バッチファイルで起動するローカル管理GUI」について詳細を確認させてください。

**提案アーキテクチャ:**
```
[admin/]
├── start-admin.bat          ← ダブルクリックで起動
├── admin-server.js          ← ローカルNode.jsサーバー (localhost:3000)
├── admin.html               ← 管理画面UI
└── admin-data/
    └── feedback.json        ← ローカルDB（JSON）
```

**動作フロー:**
```
1. start-admin.bat をダブルクリック
2. Node.js サーバーが localhost:3000 で起動
3. ブラウザが自動で http://localhost:3000/admin.html を開く
4. 管理画面で投稿の確認・承認・返信が可能
5. 承認した内容は GitHub にプッシュ（git コマンド or GitHub API）
```

**セキュリティ:**
- `admin/` フォルダは `.gitignore` に追加（GitHub Pages に公開されない）
- ローカル環境でのみ動作

- [x] A) 上記提案でOK
- [ ] B) Node.js 不要（HTML + JSのみ）を希望
- [ ] C) その他（下記に記載）

→ ユーザー回答:

---

### Q11. ユーザー投稿のセキュリティ

**質問:** ユーザーがゲーム画面から投稿する際、GitHubへの直接書き込みはセキュリティ上困難です（トークン露出リスク）。以下のどの方式を希望しますか？

**案A) Google Forms 埋め込み:**
```
ゲーム内ボタン → Google Form（iframe or 別ウィンドウ）→ Spreadsheet
作者が定期的に確認、手動でJSONに反映
```

**案B) GitHub Issues 経由（Bot利用）:**
```
ゲーム内フォーム → 専用の投稿用サーバー（無料: Vercel/Netlify Functions）→ GitHub Issues API
```

**案C) 完全ローカル処理:**
```
ゲーム内でテキスト生成 → ユーザーがコピー → メール/Twitter/Discord等で送信
作者が手動で管理
```

- [x] A) Google Forms 埋め込み
- [ ] B) GitHub Issues 経由（無料サーバーレス関数使用）
- [ ] C) 完全ローカル処理（手動運用）
- [ ] D) その他（下記に記載）

→ ユーザー回答:

---

## 質疑応答まとめ

| 質問 | 回答 |
|------|------|
| Q1 | E) GitHub活用 |
| Q2 | B) ニックネーム入力 |
| Q3 | B) アクション履歴+状態（試合中は詳細） |
| Q4 | B) カード形式 |
| Q5 | ローカルバッチ起動の管理GUI |
| Q6 | B) 本人即時表示、他ユーザーは承認後 |
| Q7 | A) 右上固定 |
| Q8 | A) オフライン時は機能無効 |
| 優先順位 | B) 全機能同時実装 |
| Q9 | D) GitHub Gist |
| Q10 | A) ローカルNode.jsサーバー構成OK |
| Q11 | A) Google Forms 埋め込み |

---

**質疑応答完了:** ✅

**次のステップ:** 進捗表に従って実装開始
